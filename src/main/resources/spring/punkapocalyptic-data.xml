<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
	http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd
	http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd">

	<context:component-scan
		base-package="com.wandrell.tabletop.punkapocalyptic.punkabuilder.data.util" />

	<util:list id="dataSources" value-type="java.io.Reader">
		<!-- Faction weapon enhancements -->
		<ref bean="readerModelFactionWeaponEnhancement" />
		<!-- Unit weapons -->
		<ref bean="readerModelUnitWeapon" />
		<!-- Unit weapon enhancements -->
		<ref bean="readerModelUnitEnhancement" />
		<!-- Unit mutations -->
		<ref bean="readerModelUnitMutation" />
	</util:list>

	<util:map id="repositoryMap">
		<entry key="armor">
			<ref bean="armorRepo" />
		</entry>
		<entry key="enhancement">
			<ref bean="enhancementRepo" />
		</entry>
		<entry key="equipment">
			<ref bean="equipmentRepo" />
		</entry>
		<entry key="mutation">
			<ref bean="mutationRepo" />
		</entry>
		<entry key="rule">
			<ref bean="ruleRepo" />
		</entry>
		<entry key="unit">
			<ref bean="unitRepo" />
		</entry>
		<entry key="weapon">
			<ref bean="weaponRepo" />
		</entry>
		<entry key="weapon_melee">
			<ref bean="weaponRepo" />
		</entry>
		<entry key="weapon_ranged">
			<ref bean="weaponRepo" />
		</entry>
		<entry key="unit_armor">
			<ref bean="unitArmorRepo" />
		</entry>
		<entry key="armor_option">
			<ref bean="armorOptionRepo" />
		</entry>
		<entry key="unit_equipment">
			<ref bean="unitEquipmentRepo" />
		</entry>
		<entry key="unit_mutation">
			<ref bean="unitMutationRepo" />
		</entry>
		<entry key="unit_weapon">
			<ref bean="unitWeaponRepo" />
		</entry>
		<entry key="faction_unit">
			<ref bean="factionUnitRepo" />
		</entry>
		<entry key="faction_unit">
			<ref bean="factionUnitRepo" />
		</entry>
	</util:map>

	<!-- MODEL SERVICE READERS -->

	<!-- FACTION -->

	<!-- Faction weapon enhancement readers -->
	<bean id="readerModelFactionWeaponEnhancement" class="com.wandrell.util.ResourceUtils"
		factory-method="getClassPathReader">
		<constructor-arg type="java.lang.String"
			value="${model.conf.availability.enhancement.faction.file}" />
	</bean>

	<!-- UNIT -->

	<!-- Unit weapon readers -->
	<bean id="readerModelUnitWeapon" class="com.wandrell.util.ResourceUtils"
		factory-method="getClassPathReader">
		<constructor-arg type="java.lang.String"
			value="${model.conf.availability.weapon.file}" />
	</bean>

	<!-- Unit weapon enhancement readers -->
	<bean id="readerModelUnitEnhancement" class="com.wandrell.util.ResourceUtils"
		factory-method="getClassPathReader">
		<constructor-arg type="java.lang.String"
			value="${model.conf.availability.enhancement.unit.file}" />
	</bean>

	<!-- Unit mutation readers -->
	<bean id="readerModelUnitMutation" class="com.wandrell.util.ResourceUtils"
		factory-method="getClassPathReader">
		<constructor-arg type="java.lang.String"
			value="${model.conf.availability.mutation.unit.file}" />
	</bean>

</beans>